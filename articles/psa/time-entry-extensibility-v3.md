---
title: 自訂每週時間項目
description: 本主題提供有關如何實作支援組織實務之自訂商務規則的資訊。
author: stsporen
manager: kfend
ms.service: project-operations
ms.custom:
- dyn365-projectservice
ms.date: 07/09/2019
ms.topic: article
ms.author: rumant
audience: Admin
search.audienceType:
- admin
- customizer
- enduser
search.app:
- D365CE
- D365PS
- ProjectOperations
ms.openlocfilehash: 3c4a508f2a67f87302f8b81640d2031fd5d2627b
ms.sourcegitcommit: 4cf1dc1561b92fca4175f0b3813133c5e63ce8e6
ms.translationtype: HT
ms.contentlocale: zh-HK
ms.lasthandoff: 10/28/2020
ms.locfileid: "4127950"
---
# <a name="customize-weekly-time-entry"></a><span data-ttu-id="292e8-103">自訂每週時間項目</span><span class="sxs-lookup"><span data-stu-id="292e8-103">Customize weekly time entry</span></span> 

[!INCLUDE[cc-applies-to-psa-app-3.x](../includes/cc-applies-to-psa-app-3x.md)]

<span data-ttu-id="292e8-104">在 Microsoft Dynamics 365 Project Service Automation 3.3 版中，Microsoft 推出了新式網格，讓專案資源一次快速輸入最多一週的工時。</span><span class="sxs-lookup"><span data-stu-id="292e8-104">In Microsoft Dynamics 365 Project Service Automation version 3.3, Microsoft introduced a modern grid that lets project resources quickly enter time for up to one week at a time.</span></span> <span data-ttu-id="292e8-105">新的每週時間輸入網格可以依日期、列或週來顯示項目的總計。</span><span class="sxs-lookup"><span data-stu-id="292e8-105">The new weekly time entry grid can show totals for entries by date, by row, or by week.</span></span> <span data-ttu-id="292e8-106">資源可以製作一週中時間項目的複本，也可以從先前各週大量複製。</span><span class="sxs-lookup"><span data-stu-id="292e8-106">Resources can make copies of time entries within the week and also bulk-copy from previous weeks.</span></span> <span data-ttu-id="292e8-107">系統自訂員可以藉由新增欄位、新增查詢至其他實體，以及實作支援其組織作法的自訂商務規則，來自訂檢視表。</span><span class="sxs-lookup"><span data-stu-id="292e8-107">System customizers can customize the view by adding fields, adding lookups to other entities, and implementing custom business rules to support their organization's practices.</span></span>

<span data-ttu-id="292e8-108">時間項目與新的每週時間網格是透過網站地圖進行存取。</span><span class="sxs-lookup"><span data-stu-id="292e8-108">Time entry and the new weekly time grid are accessed through the site map.</span></span> <span data-ttu-id="292e8-109">屬於舊版 PSA 一部分的非可擴充自訂時間輸入體驗，已由可擴充的每週時間輸入網格以及唯讀網格及行事曆中的替代體驗所取代。</span><span class="sxs-lookup"><span data-stu-id="292e8-109">The non-extensible custom time entry experience that was part of earlier PSA versions has been replaced by the extensible weekly time entry grid, and also by an alternative experience in the read-only grid and calendar.</span></span> <span data-ttu-id="292e8-110">因為發生這項變更，使用者可以按每週金額輸入時間。</span><span class="sxs-lookup"><span data-stu-id="292e8-110">Because of this change, users can enter time in weekly amounts.</span></span>

## <a name="page-layout"></a><span data-ttu-id="292e8-111">頁面版面配置</span><span class="sxs-lookup"><span data-stu-id="292e8-111">Page layout</span></span>
<span data-ttu-id="292e8-112">新的每週時間輸入網格是自訂控制項，其中有一個工具列以及 **維度** 和 **期間** 這兩個主要區段。</span><span class="sxs-lookup"><span data-stu-id="292e8-112">The new weekly time entry grid is a custom control that has a toolbar and two main sections, **Dimensions** and **Duration**.</span></span> <span data-ttu-id="292e8-113">工具列包含一個按鈕，僅適用於時間輸入網格的這個自訂控制項。</span><span class="sxs-lookup"><span data-stu-id="292e8-113">The toolbar includes a button that applies only to this custom control for the time entry grid.</span></span> <span data-ttu-id="292e8-114">相比之下，位於頁面頂端動作窗格的按鈕適用於三種受時間項目支援的控制項類型：每週時間輸入控制項、唯讀控制項以及行事曆控制項。</span><span class="sxs-lookup"><span data-stu-id="292e8-114">By contrast, the buttons on the Action Pane at the top of the page apply to the three types of controls that are supported for time entry: the weekly time entry control, the read-only control, and the calendar control.</span></span>

### <a name="dimensions"></a><span data-ttu-id="292e8-115">維度</span><span class="sxs-lookup"><span data-stu-id="292e8-115">Dimensions</span></span>
<span data-ttu-id="292e8-116">**維度** 區段會以欄標題顯示所有可據以輸入時間的維度。</span><span class="sxs-lookup"><span data-stu-id="292e8-116">The **Dimensions** section shows, as column headings, all the dimensions that time can be entered against.</span></span> <span data-ttu-id="292e8-117">下列維度是現成支援的可用維度：</span><span class="sxs-lookup"><span data-stu-id="292e8-117">The following dimensions are supported out of the box:</span></span>

- <span data-ttu-id="292e8-118">計畫</span><span class="sxs-lookup"><span data-stu-id="292e8-118">Project</span></span>
- <span data-ttu-id="292e8-119">專案工作</span><span class="sxs-lookup"><span data-stu-id="292e8-119">Project Task</span></span>
- <span data-ttu-id="292e8-120">角色</span><span class="sxs-lookup"><span data-stu-id="292e8-120">Role</span></span>
- <span data-ttu-id="292e8-121">Type</span><span class="sxs-lookup"><span data-stu-id="292e8-121">Type</span></span>
- <span data-ttu-id="292e8-122">項目狀態</span><span class="sxs-lookup"><span data-stu-id="292e8-122">Entry Status</span></span>

<span data-ttu-id="292e8-123">**維度** 區段不允許直接編輯。</span><span class="sxs-lookup"><span data-stu-id="292e8-123">The **Dimensions** section doesn't allow for inline editing.</span></span> <span data-ttu-id="292e8-124">此區段是由可讓自訂欄位新增至每週時間輸入網格的檢視表所支援。</span><span class="sxs-lookup"><span data-stu-id="292e8-124">This section is backed by a view that enables custom fields to be added to the weekly time entry grid.</span></span> <span data-ttu-id="292e8-125">如需如何新增自訂欄位的詳細資訊，請參閱本主題後面的「擴充性」一節。</span><span class="sxs-lookup"><span data-stu-id="292e8-125">For information about how to add custom fields, see the "Extensibility" section later in this topic.</span></span>

### <a name="duration"></a><span data-ttu-id="292e8-126">期間</span><span class="sxs-lookup"><span data-stu-id="292e8-126">Duration</span></span>
<span data-ttu-id="292e8-127">[期間] 區段以欄標題顯示一週中哪幾天。</span><span class="sxs-lookup"><span data-stu-id="292e8-127">The Duration section shows the days of the week as column headers.</span></span> <span data-ttu-id="292e8-128">此區段允許直接編輯。</span><span class="sxs-lookup"><span data-stu-id="292e8-128">This section allows for inline editing.</span></span> <span data-ttu-id="292e8-129">建立具有適當維度的時間項目列之後，使用者就可以直接快速輸入他們在這些維度上花費的時間量。</span><span class="sxs-lookup"><span data-stu-id="292e8-129">After a time entry row is created that has appropriate dimensions, users can quickly enter, inline, the amount of time that they spent on those dimensions.</span></span>

## <a name="create-a-new-time-entry"></a><span data-ttu-id="292e8-130">建立新的時間項目</span><span class="sxs-lookup"><span data-stu-id="292e8-130">Create a new time entry</span></span>
<span data-ttu-id="292e8-131">若要在時間輸入網格中建立新的時間項目，請選取 **新增**。</span><span class="sxs-lookup"><span data-stu-id="292e8-131">To create a new time entry in the time entry grid, select **New**.</span></span> <span data-ttu-id="292e8-132"> **時間項目快速建立** 對話方塊隨即出現。</span><span class="sxs-lookup"><span data-stu-id="292e8-132">The **Time Entry Quick Create** dialog box appears.</span></span> <span data-ttu-id="292e8-133">在此對話方塊中，使用者可以選取時間項目日期，然後連同數字鍵入 **h**、**m** 或 **d**，以分鐘、小時或天數來輸入 **專案**、**專案工作**、**角色** 和 **期間** 維度的資料。</span><span class="sxs-lookup"><span data-stu-id="292e8-133">In this dialog box, users can select the time entry date, and then enter data for the **Project**, **Project Task**, **Role**, and **Duration** dimensions in minutes, hours, or days by typing **h**, **m**, or **d**, together with the number.</span></span> <span data-ttu-id="292e8-134">使用者也可以輸入時間項目可供外部共用的描述和註解。</span><span class="sxs-lookup"><span data-stu-id="292e8-134">Users can also enter a description and comments that can be shared externally for the time entry.</span></span> <span data-ttu-id="292e8-135">當使用者儲存其變更時，他們依據維度輸入的值會顯示在 **維度** 區段中。</span><span class="sxs-lookup"><span data-stu-id="292e8-135">When users save their changes, the values that they entered against the dimensions appear in the **Dimensions** section.</span></span> <span data-ttu-id="292e8-136">他們在 **期間** 欄位中輸入的期間資訊會在建立時間項目的日期出現。</span><span class="sxs-lookup"><span data-stu-id="292e8-136">Duration information that they entered in the **Duration** field appears on the date that the time entry was created for.</span></span>

<span data-ttu-id="292e8-137">系統檢視表支援查詢欄位。</span><span class="sxs-lookup"><span data-stu-id="292e8-137">Lookup fields are backed by system views.</span></span> <span data-ttu-id="292e8-138">例如，使用者進入專案後，**專案工作** 欄位預設會設定為 **複製** 檢視表。</span><span class="sxs-lookup"><span data-stu-id="292e8-138">For example, after a user enters a project, the **Project Task** field is set to the **Copy** view by default.</span></span> <span data-ttu-id="292e8-139">若要建立未指派給使用者之工作的時間項目，請在查詢對話方塊中選取 **變更檢視表**，然後選取 **所有使用中專案工作** 檢視表。</span><span class="sxs-lookup"><span data-stu-id="292e8-139">To create time entries for tasks that aren't assigned to a user, select **Change View** in the lookup dialog box, and then select the **All Active Project Tasks** view.</span></span>

## <a name="edit-a-time-entry"></a><span data-ttu-id="292e8-140">編輯時間項目</span><span class="sxs-lookup"><span data-stu-id="292e8-140">Edit a time entry</span></span>
<span data-ttu-id="292e8-141">時間項目頁面上某些欄位的詳細資料 (例如 **描述** 和 **外部註解**) 不會顯示在每週時間輸入網格中。</span><span class="sxs-lookup"><span data-stu-id="292e8-141">Details from some fields on the time entry page, such as **Description** and **External Comments**, aren't shown in the weekly time entry grid.</span></span> <span data-ttu-id="292e8-142">相反的，會有一個小三角形指標出現在含有這些額外詳細資料的期間儲存格中。</span><span class="sxs-lookup"><span data-stu-id="292e8-142">Instead, a small triangular indicator appears in duration cells that have these additional details.</span></span> <span data-ttu-id="292e8-143">選取儲存格，然後選取 **編輯詳細資料**，以在 **快速編輯** 窗格中檢視資料。</span><span class="sxs-lookup"><span data-stu-id="292e8-143">Select the cell, and then select **Edit Details** to view the data in the **Quick Edit** pane.</span></span> <span data-ttu-id="292e8-144">若要針對不屬於每週時間輸入網格一部分的特定時間項目來編輯或更新其詳細資料，則使用者必須開啟 **快速編輯** 窗格。</span><span class="sxs-lookup"><span data-stu-id="292e8-144">To edit or update the details for a specific time entry that isn't part of the weekly time entry grid, users must open the **Quick Edit** pane.</span></span>

## <a name="copy-a-time-entry-row"></a><span data-ttu-id="292e8-145">複製時間項目列</span><span class="sxs-lookup"><span data-stu-id="292e8-145">Copy a time entry row</span></span>
<span data-ttu-id="292e8-146">建立第一個時間項目列之後，使用者可以選取 **複製列**，將整列複製到新的一列。</span><span class="sxs-lookup"><span data-stu-id="292e8-146">After the first time entry row has been created, users can select **Copy Row** to copy the whole row to a new row.</span></span> <span data-ttu-id="292e8-147">以這種方式複製一列時，也會複製維度和期間。</span><span class="sxs-lookup"><span data-stu-id="292e8-147">When a row is copied in this way, dimensions and durations are also copied.</span></span> <span data-ttu-id="292e8-148">使用者也可以選取 **編輯列**，更新維度值並直接在 **期間** 區段中編輯期間。</span><span class="sxs-lookup"><span data-stu-id="292e8-148">Users can also select **Edit Row** to update dimension values and durations inline in the **Duration** section.</span></span>

## <a name="open-a-time-entry"></a><span data-ttu-id="292e8-149">開啟時間項目</span><span class="sxs-lookup"><span data-stu-id="292e8-149">Open a time entry</span></span>
<span data-ttu-id="292e8-150">為了在最顯著的欄位中支援最佳且快速輸入，每週時間輸入網格會顯示所選維度及時間期間的子集。</span><span class="sxs-lookup"><span data-stu-id="292e8-150">To support optimal and quick entry in the most prominent fields, the weekly time entry grid show a subset of selected dimensions and time durations.</span></span> <span data-ttu-id="292e8-151">若要檢視單一時間項目的所有詳細資料，請在 **編輯專案** 下選取 **開啟**。</span><span class="sxs-lookup"><span data-stu-id="292e8-151">To view all the details of a single time entry, under **Edit Entry**, select **Open**.</span></span>

## <a name="submit-a-time-entry"></a><span data-ttu-id="292e8-152">送出時間項目</span><span class="sxs-lookup"><span data-stu-id="292e8-152">Submit a time entry</span></span>
<span data-ttu-id="292e8-153">使用者可以送出單一時間項目或一組時間項目，方法是選取儲存格區塊或整個時間項目列，然後選取 **送出**。</span><span class="sxs-lookup"><span data-stu-id="292e8-153">Users can submit a single time entry or a group of time entries by selecting a block of cells or a whole time entry row, and then selecting **Submit**.</span></span> <span data-ttu-id="292e8-154">送出的時間項目會在核准者的 **核准** 頁面上顯示為等待核准。</span><span class="sxs-lookup"><span data-stu-id="292e8-154">Submitted time entries appear as entries that are pending approval on the approvers' **Approval** page.</span></span> <span data-ttu-id="292e8-155">成功送出時間項目之後，就無法加以編輯。</span><span class="sxs-lookup"><span data-stu-id="292e8-155">After time entries are successfully submitted, they can't be edited.</span></span>

## <a name="recall-a-time-entry"></a><span data-ttu-id="292e8-156">回收時間項目</span><span class="sxs-lookup"><span data-stu-id="292e8-156">Recall a time entry</span></span>
<span data-ttu-id="292e8-157">您可以回收已送出的時間項目。</span><span class="sxs-lookup"><span data-stu-id="292e8-157">You can recall time entries that you've submitted.</span></span> <span data-ttu-id="292e8-158">您可以回收單一時間項目、時間項目區塊或整列時間項目。</span><span class="sxs-lookup"><span data-stu-id="292e8-158">You can recall a single time entry, a block of time entries, or a whole row of time entries.</span></span> <span data-ttu-id="292e8-159">回收的時間項目可供資源進行編輯。</span><span class="sxs-lookup"><span data-stu-id="292e8-159">Recalled time entries are available to resources for editing.</span></span>

## <a name="time-entry-status"></a><span data-ttu-id="292e8-160">時間項目狀態</span><span class="sxs-lookup"><span data-stu-id="292e8-160">Time entry status</span></span>
<span data-ttu-id="292e8-161">系統會自動為新的時間項目指派 **草稿** 狀態。</span><span class="sxs-lookup"><span data-stu-id="292e8-161">New time entries are automatically assigned a status of **Draft**.</span></span> <span data-ttu-id="292e8-162">送出時間項目時，狀態會更新為 **已送出**。</span><span class="sxs-lookup"><span data-stu-id="292e8-162">When a time entry is submitted, the status is updated to **Submitted**.</span></span> <span data-ttu-id="292e8-163">送出的時間項目獲核准時，狀態會更新為 **已核准**。</span><span class="sxs-lookup"><span data-stu-id="292e8-163">When a submitted time entry is approved, the status is updated to **Approved**.</span></span> <span data-ttu-id="292e8-164">如果時間項目遭拒絕，狀態會更新為 **已退回**，而項目會變成可供更正並重新送出。</span><span class="sxs-lookup"><span data-stu-id="292e8-164">If a time entry is rejected, the status is updated to **Returned**, and the entry becomes available for correction and resubmission.</span></span> <span data-ttu-id="292e8-165">只有狀態為 **草稿** 的時間項目可以被刪除。</span><span class="sxs-lookup"><span data-stu-id="292e8-165">Only time entries that have a status of **Draft** can be deleted.</span></span>

## <a name="view-rejection-comments"></a><span data-ttu-id="292e8-166">檢視拒絕註解</span><span class="sxs-lookup"><span data-stu-id="292e8-166">View rejection comments</span></span>
<span data-ttu-id="292e8-167">核准者拒絕時間項目時，該核准人可能會加入拒絕註解，幫助資源了解拒絕原因。</span><span class="sxs-lookup"><span data-stu-id="292e8-167">When a time entry is rejected by an approver, the approver might add rejection comments to help the resource understand the reason for the rejection.</span></span> <span data-ttu-id="292e8-168">若要檢視時間項目的拒絕註解，請選取 **開啟專案**。</span><span class="sxs-lookup"><span data-stu-id="292e8-168">To view the rejection comments for a time entry, select **Open entry**.</span></span> <span data-ttu-id="292e8-169">這些拒絕註解會顯示在時間表中。</span><span class="sxs-lookup"><span data-stu-id="292e8-169">The rejection comments will be shown in the timeline.</span></span> <span data-ttu-id="292e8-170">在時間表中，資源可在重新送出項目之前，先回應拒絕註解。</span><span class="sxs-lookup"><span data-stu-id="292e8-170">In the timeline, the resource can respond to the rejection comments before he or she resubmits the entry.</span></span>

## <a name="copy-week"></a><span data-ttu-id="292e8-171">複製週次</span><span class="sxs-lookup"><span data-stu-id="292e8-171">Copy week</span></span>
<span data-ttu-id="292e8-172">建立幾個時間項目之後，使用者可以選取 **複製週次** 大量建立其他時間項目。</span><span class="sxs-lookup"><span data-stu-id="292e8-172">After a few time entries have been created, users can select **Copy Week** to bulk-create additional time entries.</span></span> <span data-ttu-id="292e8-173">**複製** 對話方塊隨即顯示。</span><span class="sxs-lookup"><span data-stu-id="292e8-173">The **Copy** dialog box appears.</span></span> <span data-ttu-id="292e8-174">在 **開始期間** 區段中，使用 **開始日期** 和 **結束日期** 欄位來定義要從中複製時間項目的日期範圍。</span><span class="sxs-lookup"><span data-stu-id="292e8-174">In the **From period** section, use the **Start Date** and **End Date** fields to define the date range to copy time entries from.</span></span> <span data-ttu-id="292e8-175">在 **結束期間** 區段的 **開始日期** 欄位中，指定建立時間項目的日期。</span><span class="sxs-lookup"><span data-stu-id="292e8-175">In the **To Period** section, in the **Start Date** field, specify the date to create time entries for.</span></span> <span data-ttu-id="292e8-176">然後選取 **複製**。</span><span class="sxs-lookup"><span data-stu-id="292e8-176">Then select **Copy**.</span></span> <span data-ttu-id="292e8-177">對於「結束」期間的指定日期，會建立「開始」期間中對應星期幾的時間項目複本。</span><span class="sxs-lookup"><span data-stu-id="292e8-177">For the specified date in the "to" period, a copy of the time entries for the corresponding day of the week in the "from" period is created.</span></span> <span data-ttu-id="292e8-178">例如，將上週星期一的時間項目複製到指定為「結束」期間的週的星期一。</span><span class="sxs-lookup"><span data-stu-id="292e8-178">For example, Monday's time entry from last week is copied into Monday of the week that is specified as the "to" period.</span></span>

## <a name="import"></a><span data-ttu-id="292e8-179">匯入</span><span class="sxs-lookup"><span data-stu-id="292e8-179">Import</span></span>
<span data-ttu-id="292e8-180">您可以使用相同的基本程序，從預約、指派和交換中匯入。</span><span class="sxs-lookup"><span data-stu-id="292e8-180">The same basic process is used to import from bookings, assignments, and exchanges.</span></span> <span data-ttu-id="292e8-181">使用者可以指定要從中匯入預約的日期範圍。</span><span class="sxs-lookup"><span data-stu-id="292e8-181">Users can specify the date range that bookings are imported from.</span></span> <span data-ttu-id="292e8-182">他們接著必須明確選取應複製成草稿時間項目的預約。</span><span class="sxs-lookup"><span data-stu-id="292e8-182">They must then explicitly select the bookings that should be copied into draft time entries.</span></span> <span data-ttu-id="292e8-183">在先前版本中，建議的時間項目會出現在網格和行事曆中，並在重新整理工作階段時遺失。</span><span class="sxs-lookup"><span data-stu-id="292e8-183">In the previous release, suggested time entries appeared in the grid and the calendar, and were lost when the session was refreshed.</span></span>

## <a name="extensibility"></a><span data-ttu-id="292e8-184">擴充性</span><span class="sxs-lookup"><span data-stu-id="292e8-184">Extensibility</span></span>
### <a name="add-custom-fields-that-have-lookups-to-other-entities"></a><span data-ttu-id="292e8-185">新增具有其他實體查詢的自訂欄位</span><span class="sxs-lookup"><span data-stu-id="292e8-185">Add custom fields that have lookups to other entities</span></span>
<span data-ttu-id="292e8-186">有三個主要步驟將自訂欄位新增至每週時間輸入網格。</span><span class="sxs-lookup"><span data-stu-id="292e8-186">There are three main steps to adding a custom field to the weekly time entry grid.</span></span>

1.  <span data-ttu-id="292e8-187">將自訂欄位新增至 [快速建立] 對話方塊。</span><span class="sxs-lookup"><span data-stu-id="292e8-187">Add the custom field to the quick create dialog box.</span></span>
2.  <span data-ttu-id="292e8-188">設定網格以顯示自訂欄位。</span><span class="sxs-lookup"><span data-stu-id="292e8-188">Configure the grid to show the custom field.</span></span>
3.  <span data-ttu-id="292e8-189">視需要將自訂欄位新增至列編輯工作流程或儲存格編輯工作流程。</span><span class="sxs-lookup"><span data-stu-id="292e8-189">Add the custom field to either the row edit task flow or the cell edit task flow, as appropriate.</span></span>

<span data-ttu-id="292e8-190">您也必須確定新欄位在列或儲存格編輯工作流程中有必要的驗證。</span><span class="sxs-lookup"><span data-stu-id="292e8-190">You must also make sure that the new field has the required validations in the row or cell edit task flow.</span></span> <span data-ttu-id="292e8-191">在此步驟中，您必須根據時間項目狀態鎖定欄位。</span><span class="sxs-lookup"><span data-stu-id="292e8-191">As part of this step, you must lock the field, based on the time entry status.</span></span>

#### <a name="add-the-custom-field-to-the-quick-create-dialog-box"></a><span data-ttu-id="292e8-192">將自訂欄位新增至 [快速建立] 對話方塊</span><span class="sxs-lookup"><span data-stu-id="292e8-192">Add the custom field to the quick create dialog box</span></span>
<span data-ttu-id="292e8-193">您必須將自訂欄位新增至 [時間項目快速建立] 對話方塊。</span><span class="sxs-lookup"><span data-stu-id="292e8-193">You must add the custom field to the Create Time Entry Quick Create dialog box.</span></span> <span data-ttu-id="292e8-194">因此該使用者可以在使用 **新增** 按鈕新增時間專案時輸入其值。</span><span class="sxs-lookup"><span data-stu-id="292e8-194">so that users can enter a value for it when they add time entries by using the **New** button.</span></span>

#### <a name="configure-the-grid-to-show-the-custom-field"></a><span data-ttu-id="292e8-195">設定網格以顯示自訂欄位</span><span class="sxs-lookup"><span data-stu-id="292e8-195">Configure the grid to show the custom field</span></span>
<span data-ttu-id="292e8-196">有兩個方法將自訂欄位新增至每週時間輸入網格。</span><span class="sxs-lookup"><span data-stu-id="292e8-196">There are two ways add a custom field to the weekly time entry grid.</span></span> <span data-ttu-id="292e8-197">第一個選項是自訂 **我的每週時間項目** 檢視表，並將自訂欄位新增至其中。</span><span class="sxs-lookup"><span data-stu-id="292e8-197">The first option is to customize the **My Weekly Time Entries** view and add the custom field to it.</span></span> <span data-ttu-id="292e8-198">您可以在檢視表中編輯這些屬性，以選擇網格中自訂欄位的位置和大小。</span><span class="sxs-lookup"><span data-stu-id="292e8-198">You can choose the position and size of the custom field in the grid by editing those properties in the view.</span></span>

<span data-ttu-id="292e8-199">第二個選項是建立新的自訂時間輸入檢視表，並將其設定為預設檢視表。</span><span class="sxs-lookup"><span data-stu-id="292e8-199">The second option is to create a new custom time entry view and set it as the default view.</span></span> <span data-ttu-id="292e8-200">除了您要包含在網格中的欄之外，此檢視表應也包含 **描述** 及 **外部註解** 欄位。</span><span class="sxs-lookup"><span data-stu-id="292e8-200">This view should contain the **Description** and **External Comments** fields, in addition to the columns that you want to have in the grid.</span></span> <span data-ttu-id="292e8-201">您可以在檢視表中編輯這些屬性，以選擇網格的位置、大小和預設排序順序。</span><span class="sxs-lookup"><span data-stu-id="292e8-201">You can choose the position, size, and default sort order of the grid by editing those properties in the view.</span></span> <span data-ttu-id="292e8-202">接下來，設定此檢視表的自訂控制項，使其成為 **時間輸入網格** 控制項。</span><span class="sxs-lookup"><span data-stu-id="292e8-202">Next, configure the custom control for this view so that it's a **Time Entry Grid** control.</span></span> <span data-ttu-id="292e8-203">將此控制項新增至檢視表，然後選取該控制項以用於網頁、手機及平板電腦。</span><span class="sxs-lookup"><span data-stu-id="292e8-203">Add this control to the view, and select it for web, phone, and tablet.</span></span> <span data-ttu-id="292e8-204">接下來，設定每週時間輸入網格的參數。</span><span class="sxs-lookup"><span data-stu-id="292e8-204">Next, configure the parameters for the weekly time entry grid.</span></span> <span data-ttu-id="292e8-205">將 **開始日期** 欄位設定為 **msdyn_date**、將 **期間** 欄位設定為 **msdyn_duration**，以及並將 **狀態** 欄位設定為 **msdyn_entrystatus**。</span><span class="sxs-lookup"><span data-stu-id="292e8-205">Set the **Start Date** field to **msdyn_date**, set the **Duration** field to **msdyn_duration**, and set the **Status** field to **msdyn_entrystatus**.</span></span> <span data-ttu-id="292e8-206">在預設檢視表中，**唯讀狀態清單** 欄位設定為 **192350002,192350003,192350004**、**列編輯工作流程** 欄位設定為 **msdyn_timeentryrowedit**，以及 **儲存格編輯工作流程** 欄位已設定為 **msdyn_timeentryedit**。</span><span class="sxs-lookup"><span data-stu-id="292e8-206">For the default view, the **Read-only Status List** field is set to **192350002,192350003,192350004**, the **Row Edit Task Flow** field is set to **msdyn_timeentryrowedit**, and the **Cell Edit Task Flow** field is set to **msdyn_timeentryedit**.</span></span> <span data-ttu-id="292e8-207">您可以自訂這些欄位以新增或移除唯讀狀態，或是使用不同的工作型體驗 (TBX) 進行列或儲存格編輯。</span><span class="sxs-lookup"><span data-stu-id="292e8-207">You can customize these fields to add or remove read-only status, or to use a different task-based experience (TBX) for row or cell editing.</span></span> <span data-ttu-id="292e8-208">這些欄位應繫結至靜態值。</span><span class="sxs-lookup"><span data-stu-id="292e8-208">These fields should be bound to a static value.</span></span>

#### <a name="add-the-custom-field-to-the-appropriate-edit-task-flow"></a><span data-ttu-id="292e8-209">將自訂欄位新增至適當的編輯工作流程</span><span class="sxs-lookup"><span data-stu-id="292e8-209">Add the custom field to the appropriate edit task flow</span></span>
<span data-ttu-id="292e8-210">您可以在 **程序** 底下找到用於編輯的 TBX 頁面。</span><span class="sxs-lookup"><span data-stu-id="292e8-210">The TBX pages that are used for editing can be found under **Processes**.</span></span> <span data-ttu-id="292e8-211">預設頁面是 **Project Service - 時間項目列編輯** 和 **Project Service - 時間項目編輯**。</span><span class="sxs-lookup"><span data-stu-id="292e8-211">The default pages are **Project Service - Time Entry Row Edit** and **Project Service - Time Entry Edit**.</span></span> <span data-ttu-id="292e8-212">您可以編輯這些預設頁面，或建立新的自訂 TBX 頁面。</span><span class="sxs-lookup"><span data-stu-id="292e8-212">You can either edit these default pages or create new custom TBX pages.</span></span>

> [!NOTE] 
> <span data-ttu-id="292e8-213">這兩個選項都會移除 **專案** 與 **專案工作** 實體的一些預設的篩選，讓實體的所有查詢檢視表都能看得到。</span><span class="sxs-lookup"><span data-stu-id="292e8-213">Both options will remove some out-of-box filtering on **Project** and **Project Task** entities, so that all lookup views for the entities will be visible.</span></span> <span data-ttu-id="292e8-214">在預設情況下，只會顯示相關的查詢檢視表。</span><span class="sxs-lookup"><span data-stu-id="292e8-214">Out of the box, only the relevant lookup views are visible.</span></span>

<span data-ttu-id="292e8-215">您必須為自訂欄位判斷適當的工作流程。</span><span class="sxs-lookup"><span data-stu-id="292e8-215">You must determine the appropriate task flow for the custom field.</span></span> <span data-ttu-id="292e8-216">最可能的一點是，如果您將欄位新增至網格，則該欄位應該會移至用於套用至整列時間項目之欄位的列編輯工作流程。</span><span class="sxs-lookup"><span data-stu-id="292e8-216">Most likely, if you added the field to the grid, it should go in the row edit task flow that is used for fields that apply to the whole row of time entries.</span></span> <span data-ttu-id="292e8-217">如果自訂欄位每天都會有唯一值 (例如 **結束時間** 的自訂欄位)，則應進入儲存格編輯工作流程。</span><span class="sxs-lookup"><span data-stu-id="292e8-217">If the custom field has a unique value every day, such as a custom field for **End time**, it should go in the cell edit task flow.</span></span>

<span data-ttu-id="292e8-218">若要將自訂欄位新增至工作流程，請將 **欄位** 元素拖曳至頁面的適當位置，然後設定其屬性。</span><span class="sxs-lookup"><span data-stu-id="292e8-218">To add the custom field to a task flow, drag a **Field** element into the appropriate position on the page, and then set its properties.</span></span> <span data-ttu-id="292e8-219">將 **來源** 屬性設定為 **時間項目**，並將 **資料欄位** 屬性設定為自訂欄位。</span><span class="sxs-lookup"><span data-stu-id="292e8-219">Set the **Source** property to **Time Entry**, and set the **Data Field** property to the custom field.</span></span> <span data-ttu-id="292e8-220">**欄位** 屬性會指定在 TBX 頁面上的顯示名稱。</span><span class="sxs-lookup"><span data-stu-id="292e8-220">The **Field** property specifies the display name on the TBX page.</span></span> <span data-ttu-id="292e8-221">選取 **套用** 以儲存對欄位的變更。</span><span class="sxs-lookup"><span data-stu-id="292e8-221">Select **Apply** to save your changes to the field.</span></span> <span data-ttu-id="292e8-222">然後選取 **更新** 以儲存您對頁面的變更。</span><span class="sxs-lookup"><span data-stu-id="292e8-222">Then select **Update** to save your changes to the page.</span></span>

<span data-ttu-id="292e8-223">若要改用新的自訂 TBX 頁面，請建立新的程序。</span><span class="sxs-lookup"><span data-stu-id="292e8-223">To use a new custom TBX page instead, create a new process.</span></span> <span data-ttu-id="292e8-224">將類別設定為 **商務程序流程**、將實體設定為 **時間項目**，以及將商務程序類型設定為 **以工作流程方式執行程序**。</span><span class="sxs-lookup"><span data-stu-id="292e8-224">Set the category to **Business Process Flow**, set the entity to **Time Entry**, and set the business process type to **Run process as a task flow**.</span></span> <span data-ttu-id="292e8-225">在 **屬性** 底下，**頁面名稱** 屬性應設定為頁面的顯示名稱。</span><span class="sxs-lookup"><span data-stu-id="292e8-225">Under **Properties**, the **Page name** property should be set to the display name for the page.</span></span> <span data-ttu-id="292e8-226">將所有相關欄位新增至 TBX 頁面。</span><span class="sxs-lookup"><span data-stu-id="292e8-226">Add all the relevant fields to the TBX page.</span></span> <span data-ttu-id="292e8-227">儲存並啟用程序，然後將相關工作流程的自訂控制項屬性更新為程序中的 **名稱** 值。</span><span class="sxs-lookup"><span data-stu-id="292e8-227">Save and activate the process, and then update the custom control property for the relevant task flow to the value of **Name** on the process.</span></span>

### <a name="add-new-option-set-values"></a><span data-ttu-id="292e8-228">新增選項組值</span><span class="sxs-lookup"><span data-stu-id="292e8-228">Add new option set values</span></span>
<span data-ttu-id="292e8-229">若要將選項組值新增至現成可用欄位，請開啟欄位的編輯頁面，然後在 **類型** 底下選取選項組旁邊的 **編輯**。</span><span class="sxs-lookup"><span data-stu-id="292e8-229">To add option set values to an out-of-box field, open the editing page for the field, and then, under **Type**, select **Edit** next to the option set.</span></span> <span data-ttu-id="292e8-230">接下來，新增具有自訂標籤與色彩的新選項。</span><span class="sxs-lookup"><span data-stu-id="292e8-230">Next, add a new option that has a custom label and color.</span></span> <span data-ttu-id="292e8-231">如果您想要加入新的時間項目狀態，請將現成可用欄位命名為 **項目狀態**，而不是 **狀態**。</span><span class="sxs-lookup"><span data-stu-id="292e8-231">If you want to add a new time entry status, the out-of-box field is named **Entry Status**, not **Status**.</span></span>

### <a name="designate-a-new-time-entry-status-as-read-only"></a><span data-ttu-id="292e8-232">將新的時間項目狀態指定為唯讀</span><span class="sxs-lookup"><span data-stu-id="292e8-232">Designate a new time entry status as read-only</span></span>
<span data-ttu-id="292e8-233">若要將新的時間項目狀態指定為唯讀，請將新的時間項目值 (數字，而不是標籤) 新增至 **唯讀狀態清單** 屬性。</span><span class="sxs-lookup"><span data-stu-id="292e8-233">To designate a new time entry status as read-only, add the new time entry value (the number, not the label) to the **Read-only Status List** property.</span></span> <span data-ttu-id="292e8-234">將會針對有新狀態的列，鎖定其時間輸入網格的可編輯部分。</span><span class="sxs-lookup"><span data-stu-id="292e8-234">The editable part of the time entry grid will be locked for rows that have the new status.</span></span>
<span data-ttu-id="292e8-235">接下來，新增商務規則以鎖定 **時間項目列編輯** 和 **時間項目編輯** TBX 頁面上的所有欄位。</span><span class="sxs-lookup"><span data-stu-id="292e8-235">Next, add business rules to lock all the fields on the **Time Entry Row Edit** and **Time Entry Edit** TBX pages.</span></span> <span data-ttu-id="292e8-236">您可以開啟頁面的商務程序流程編輯器，然後選取 **商務規則** 來存取這些頁面的商務規則。</span><span class="sxs-lookup"><span data-stu-id="292e8-236">You can access the business rules for these pages by opening the business process flow editor for the page and then selecting **Business Rules**.</span></span> <span data-ttu-id="292e8-237">您可以將新狀態新增至現有商務規則中的條件，也可以為新狀態新增商務規則。</span><span class="sxs-lookup"><span data-stu-id="292e8-237">You can add the new status to the condition in the existing business rules, or you can add a new business rule for the new status.</span></span>

### <a name="add-custom-validation-rules"></a><span data-ttu-id="292e8-238">新增自訂驗證規則</span><span class="sxs-lookup"><span data-stu-id="292e8-238">Add custom validation rules</span></span>
<span data-ttu-id="292e8-239">您可以為每週時間輸入網格體驗新增的驗證規則有兩種類型：• 用戶端商務規則 (可在快速建立對話方塊和 TBX 頁面上使用)，• 伺服器端外掛程式驗證 (適用於所有時間項目更新)</span><span class="sxs-lookup"><span data-stu-id="292e8-239">There are two types of validation rules that you can add for the weekly time entry grid experience: •   Client-side business rules that work in quick create dialog boxes and on TBX pages •   Server-side plug-in validations that apply to all time entry updates</span></span>

#### <a name="business-rules"></a><span data-ttu-id="292e8-240">商務規則</span><span class="sxs-lookup"><span data-stu-id="292e8-240">Business rules</span></span>
<span data-ttu-id="292e8-241">使用商務規則鎖定和解除鎖定欄位、在欄位中輸入預設值，然後定義驗證，要求資訊只能來自目前時間項目記錄。</span><span class="sxs-lookup"><span data-stu-id="292e8-241">Use business rules to lock and unlock fields, enter default values in fields, and define validations that require information only from the current time entry record.</span></span> <span data-ttu-id="292e8-242">您可以開啟 TBX 頁面的商務程序流程編輯器，然後選取 **商務規則** 來存取此頁面的商務規則。</span><span class="sxs-lookup"><span data-stu-id="292e8-242">You can access the business rules for a TBX page by opening the business process flow editor for the page and then selecting **Business Rules**.</span></span> <span data-ttu-id="292e8-243">您可以接著編輯現有的商務規則，或新增商務規則。</span><span class="sxs-lookup"><span data-stu-id="292e8-243">You can then edit the existing business rules or add a new business rule.</span></span> <span data-ttu-id="292e8-244">如果還要更多的自訂驗證，您可以使用商務規則來執行 JavaScript。</span><span class="sxs-lookup"><span data-stu-id="292e8-244">For even more customized validations, you can use a business rule to run JavaScript.</span></span>

#### <a name="plug-in-validations"></a><span data-ttu-id="292e8-245">外掛程式驗證</span><span class="sxs-lookup"><span data-stu-id="292e8-245">Plug-in validations</span></span>
<span data-ttu-id="292e8-246">對於任何需要內容超過單一時間項目記錄所能提供範圍的驗證，或是對於任何要在網格中對內嵌更新執行的驗證，您應該使用外掛程式驗證。</span><span class="sxs-lookup"><span data-stu-id="292e8-246">You should use plug-in validations for any validations that require more context than is available in a single time entry record, or for any validations that you want to run on inline updates in the grid.</span></span> <span data-ttu-id="292e8-247">若要完成驗證，請在 **時間項目** 實體上建立自訂外掛程式。</span><span class="sxs-lookup"><span data-stu-id="292e8-247">To complete the validation, create a custom plug-in on the **Time Entry** entity.</span></span>

> [!IMPORTANT] 
> <span data-ttu-id="292e8-248">目前，當更新未通過外掛程式驗證時，TBX 頁面會發生一個已知的問題，造成使用者無法更正資訊和重新選取 [完成]。</span><span class="sxs-lookup"><span data-stu-id="292e8-248">Currently, a known issue on the TBX pages prevents users from correcting information and reselecting Done when an update fails a plug-in validation.</span></span> <span data-ttu-id="292e8-249">如需採取因應措施，請設定商務規則驗證，盡可能避免發生這種情況。</span><span class="sxs-lookup"><span data-stu-id="292e8-249">As a workaround, set up business rule validations to prevent this situation as much as possible.</span></span>
