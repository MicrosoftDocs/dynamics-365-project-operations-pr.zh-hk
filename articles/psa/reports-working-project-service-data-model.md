---
title: 使用 Project Service Automation 資料模型
description: 此主題提供有關如何使用資料模型的資訊。
author: ruhercul
manager: kfend
ms.service: project-operations
ms.custom:
- dyn365-projectservice
ms.date: 03/01/2019
ms.topic: article
ms.author: ruhercul
audience: Admin
search.audienceType:
- admin
- customizer
- enduser
search.app:
- D365CE
- D365PS
- ProjectOperations
ms.openlocfilehash: 8d63a1b36abe0a154c43e99738340f32f28c2f5e
ms.sourcegitcommit: 4cf1dc1561b92fca4175f0b3813133c5e63ce8e6
ms.translationtype: HT
ms.contentlocale: zh-HK
ms.lasthandoff: 10/28/2020
ms.locfileid: "4120300"
---
# <a name="working-with-the-project-service-automation-data-model"></a>使用 Project Service Automation 資料模型

[!INCLUDE[cc-applies-to-psa-app-3.x](../includes/cc-applies-to-psa-app-3x.md)]

Dynamics 365 Project Service Automation 擴充其他應用程式實體，並在 Common Data Service 資料模型中引進其本身的實體。 此主題描述一些會在一般 PSA 報表案例中遇到的實體。

## <a name="reporting-on-opportunities"></a>報告商機

Project Service Automation 藉由新增啟用專案型案例的欄位，擴充 Dynamics 365 Sales **商機** 實體。 這些欄位是以加上 **msdyn\_** 首碼的結構描述名稱來識別。 有一個對報告 PSA 商機很重要的新欄位是 **訂單類型**。 此欄位的 **工作型** 值指出商機是 PSA 商機。 新增至實體的其他欄位包括 **承包組織** (可擷取保有商機的組織) 以及 **客戶經理** (可擷取負責商機之客戶經理的名稱)。

**商機明細** 實體也包含與 Project Service 相關的欄位。 **計費方式** 指示商機明細是根據時間及材料還是固定價格來收費，而 **專案** 則會擷取支援商機的專案名稱。 其他您可以報告的欄位會擷取明細項目的成本和客戶預算金額。

## <a name="reporting-on-quotes"></a>報告報價

PSA 藉由新增專案相關欄位，擴充 Sales **報價** 實體。 **訂單類型** 將 PSA 報價與非 PSA 報價區分開來。 此欄位的 **工作型** 值指出報價是 PSA 報價。 其他可能與報告 PSA 報價相關的欄位包括金額欄位，例如 **應收費成本**、**非應收費成本**、**毛利率**、**估計值** 和 **預算**。 其他有用的欄位會指出報價是否可獲利、是否要按時完成，以及是否符合客戶的預算期望。

PSA 也會擴充 Sales **報價明細** 實體。 PSA 新增的一個欄位是 **帳務方式**，指出報價明細將以何種方式收費 (時間及材料或是固定價格)。 其他已新增至實體的欄位會擷取正在支援報價明細、發票、成本和預算的相關專案。

PSA 也會將新的報價相關實體新增至 Dynamics 365 資料模型。 以下列出一些範例：

- **報價明細詳細資料** – 此實體包含報價明細的專案估計詳細資料。 它包含每個報價明細各兩個的記錄。 一個記錄儲存報價明細的成本和成本詳細資料，而另一個記錄儲存報價明細的銷售金額和銷售詳細資料。
- **報價明細發票排程** – 此實體包含報價明細的帳單排程。 此排程是根據指派給報價明細的開立發票頻率所產生。
- **報價明細里程碑** – 此實體包含固定報價明細的帳單里程碑。
- **報價明細解析** – 此實體包含報價明細的財務詳細資料。 這些詳細資料可以用來依各種不同維度報告報價銷售和估計成本金額。

PSA 新增至報價的其他實體是 **報價明細專案價目表**、**報價明細資源類別** 和 **報價明細交易類別**。

![圖表中顯示報價、報價明細及專案關聯](media/PS-Reporting-image2.png "圖中顯示報價、報價明細及專案關聯")

## <a name="reporting-on-project-contracts"></a>報告專案合約

PSA 會擴充記錄專案合約時所用的 Sales **訂單** 實體。 它會新增重要的新欄位 **訂單類型**，可將合約識別為 PSA 專案合約而不是銷售訂單。 此欄位的 **工作型** 值指出訂單是 PSA 專案合約。 新增至 **訂單** 實體的其他新欄位，會擷取關於成本、PSA 合約狀態以及擁有合約之組織的詳細資料。

PSA 也會擴充 **銷售訂單明細** 實體。 它所新增的欄位包括擷取帳單方法 (時間及材料或者固定價格)、客戶預算金額以及基礎專案的欄位。

PSA 也會新增針對專案合約所設計的新實體。 以下列出一些範例：

- **專案合約服務內容詳細資料** – 此實體包含彙總至合約服務內容金額的明細項目層級詳細資料。 這些資訊可以詳細描述為透過專案排程在工作層級上產生的明細項目。
- **合約服務內容發票排程** – 此實體包含根據指派給合約服務內容的開立發票頻率所產生的帳單排程。
- **合約里程碑** – 此實體包含具有固定價格帳單條款之合約服務內容的帳務里程碑。

PSA 新增至合約的其他實體是 **專案合約服務內容專案價目表**、**專案合約服務內容資源類別** 和 **專案合約服務內容交易類別**。

![圖表中顯示訂單、訂單明細及專案關聯](media/PS-Reporting-image3.png "圖表中顯示訂單、訂單明細及專案關聯")

## <a name="reporting-on-projects"></a>報告專案

**專案** 實體及其相關實體是 PSA 專屬的實體。 **專案** 是用來擷取工作和成本方面營運情況的最上層實體。 以下是相關實體的清單：

- **專案團隊成員** – 此實體包含指派給專案的可預約資源的詳細資料。 這些資源可以是一般可預約資源，或是專案經理所輸入或透過專案排程所產生的具名可預約資源。
- **專案工作** – 此實體包含構成專案計劃或排程的工作。
- **資源指派** – 此實體包含可預約資源的工作指派。
- **資源需求** – 此實體包含任何一般資源團隊成員的需求。
- **估計** 和 **估計明細** – 這些實體具有標頭/明細項目關聯，並且包含專案的費用估計。 工作估計儲存在 **資源估計** 實體上。

![圖表中顯示資源需求和專案關聯](media/PS-Reporting-image4.png "圖表中顯示資源需求和專案關聯")

## <a name="reporting-on-resources"></a>報告資源

專案資源使用 Universal Resource Scheduling (URS) 中與其他應用程式 (例如 Microsoft Dynamics 365 Field Service) 共用的 **可預約資源** 實體。 以下是您在報告專案資源時可能需要使用的實體清單：

- **可預約資源** – 此實體代表專案團隊上所使用的使用者、連絡人、一般資源、客戶、群組或設備。
- **可預約資源特性** – 此實體包含資源的技能、認證或教育。 特性可以有評等模型所定義的評等值。
- **可預約資源類別** – 此實體表示可預約資源的角色。
- **可預約資源預約** – 此實體表示在專案上為資源預約的時間。 每個預約都有標頭實體和明細項目實體，而每個明細項目都有表示預約狀態的狀態。

![圖表中顯示可預約資源特性關聯](media/PS-Reporting-image5.png "圖表中顯示可預約資源特性關聯")

## <a name="reporting-on-actual-transactions"></a>報告實際交易

當您核准時間單或費用，或在 PSA 中為合約開立發票時，會在 **實際** 實體中擷取業務交易。 此實體可以做為幾乎 PSA 中所有財務相關報表的基礎。 **實際** 實體會擷取商務事件的成本與銷售交易。 它也會擷取許多相關的屬性。

當您使用 **實際** 的實體時，必須了解實體中已記錄哪些交易，以及何時記錄交易，這一點很重要。 以下是使用時間項目 (費用項目的流程也類似) 時的一般流程：

1. 儲存時間項目時，不會在 **實際** 實體中建立任何記錄。
2. 送出時間項目時，不會在 **實際** 實體中建立任何記錄。
3. 時間項目獲核准時，會在 **實際** 實體中建立一個記錄，也可以建立另一個記錄。 第一個記錄會儲存時間項目的成本。 第二個記錄會儲存時間項目的未開單銷售金額。 第二個記錄與指派有客戶、報價或合約服務內容的專案相依。

    |  文件日期 | 交易類型 | 交易分類 | 客戶         | Contract   | 資源     | 資源角色 | 帳單類型 | 數量 | 單價 | 金額 |
    |---------------|------------------|-------------------|------------------|------------|--------------|---------------|--------------|----------|------------|--------|
    | 18/2/3        | 成本             | Time              | Alpine Ski House | Alpine CRM | 呂麗華 | 專案經理   | 應收費   | 8.0      | 50.00      | 400.00 |
    | 18/2/3        | 未開單銷售   | Time              | Alpine Ski House | Alpine CRM | 呂麗華 | 專案經理   | 應收費   | 8.0      | 100.00     | 800.00 |

    這兩個記錄是不同但相關的記錄。 他們既不是借記也不是貸記。

4. 如果合約與專案相關聯，則為時間專案開立發票時，會在 **實際** 實體中建立兩個以上的記錄。 首先，建立未開單銷售記錄的負數金額。 這項記錄基本上會反轉未開單銷售。 其次，建立帳單銷售的交易。 同樣地，這些記錄是相互獨立但是相關的記錄，而不是借記和貸記。

    |  文件日期 | 交易類型 | 交易分類 | 客戶         | Contract   | 資源     | 資源角色 | 帳單類型 | 數量 | 單價 | 金額   |
    |---------------|------------------|-------------------|------------------|------------|--------------|---------------|--------------|----------|------------|----------|
    | 18/2/4        | 未開單銷售   | Time              | Alpine Ski House | Alpine CRM | 呂麗華 | 專案經理   | 應收費   | - 8.0    | 100.00     | - 800.00 |
    | 18/2/4        | 已開單銷售     | Time              | Alpine Ski House | Alpine CRM | 呂麗華 | 專案經理   | 應收費   | 8.0      | 100.00     | 800.00   |

**交易來源** 實體會記錄 **實際** 記錄的來源，而 **交易關係** 實體會記錄 **實際** 記錄的相關記錄。 此外，**實際** 的記錄也包含專案、專案合約 (訂單)、可預約資源和客戶的參照。

![圖表中顯示交易關係、來源交易處理和實際關聯](media/PS-Reporting-image6.png "圖表中顯示交易關係、來源交易處理和實際關聯")
