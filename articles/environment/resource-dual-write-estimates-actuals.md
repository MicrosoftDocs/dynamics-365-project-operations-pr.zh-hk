---
title: 專案估計值和實際值整合
description: 本主題提供有關 Project Operations 雙重寫入專案估計值與實際值整合的資訊。
author: sigitac
ms.date: 4/26/2021
ms.topic: article
ms.prod: ''
ms.reviewer: kfend
ms.author: sigitac
ms.openlocfilehash: d8aa1541a3560db175acead1d000895312b299db
ms.sourcegitcommit: 40f68387f594180af64a5e5c748b6efa188bd300
ms.translationtype: HT
ms.contentlocale: zh-HK
ms.lasthandoff: 05/10/2021
ms.locfileid: "6000058"
---
# <a name="project-estimates-and-actuals-integration"></a><span data-ttu-id="73ca4-103">專案估計值和實際值整合</span><span class="sxs-lookup"><span data-stu-id="73ca4-103">Project estimates and actuals integration</span></span>

<span data-ttu-id="73ca4-104">_**適用於：** 資源/非庫存型案例適用的 Project Operations_</span><span class="sxs-lookup"><span data-stu-id="73ca4-104">_**Applies To:** Project Operations for resource/non-stocked based scenarios_</span></span>

<span data-ttu-id="73ca4-105">本主題提供有關 Project Operations 雙重寫入專案估計值與實際值整合的資訊。</span><span class="sxs-lookup"><span data-stu-id="73ca4-105">This topic provides information about Project Operations dual-write integration for project estimates and actuals.</span></span>

## <a name="project-estimates"></a><span data-ttu-id="73ca4-106">專案估計值</span><span class="sxs-lookup"><span data-stu-id="73ca4-106">Project estimates</span></span>

<span data-ttu-id="73ca4-107">專案人力、費用和材料估計值是在 Microsoft Dataverse 中所建立、維護，並同步處理至 Finance and Operations 應用程式以作會計用途。</span><span class="sxs-lookup"><span data-stu-id="73ca4-107">Project labor, expense, and material estimates are created and maintained in Microsoft Dataverse and synchronized to Finance and Operations apps for accounting purposes.</span></span> <span data-ttu-id="73ca4-108">建立、更新和刪除作業不是透過 Finance and Operations 應用程式來支援。</span><span class="sxs-lookup"><span data-stu-id="73ca4-108">Create, update, and delete operations aren't supported through the Finance and Operations apps.</span></span>

<span data-ttu-id="73ca4-109">建立估計值需要專案的有效會計設定。</span><span class="sxs-lookup"><span data-stu-id="73ca4-109">Creating estimates requires a valid accounting configuration for the project.</span></span> <span data-ttu-id="73ca4-110">與合約服務內容相關的專案在專案成本和營收設定檔規則中必須已定義有效的專案成本和營收設定檔。</span><span class="sxs-lookup"><span data-stu-id="73ca4-110">Projects that are associated with contract lines must have a valid project cost and revenue profile defined in the Project cost and revenue profile rules.</span></span> <span data-ttu-id="73ca4-111">如需詳細資訊，請參閱[設定計費專案會計](../project-accounting/configure-accounting-billable-projects.md#configure-project-cost-and-revenue-profile-rules)。</span><span class="sxs-lookup"><span data-stu-id="73ca4-111">For more information, see [Configure accounting for billable projects](../project-accounting/configure-accounting-billable-projects.md#configure-project-cost-and-revenue-profile-rules).</span></span>

## <a name="labor-estimates"></a><span data-ttu-id="73ca4-112">人力估計值</span><span class="sxs-lookup"><span data-stu-id="73ca4-112">Labor estimates</span></span>

<span data-ttu-id="73ca4-113">人力估計值是由同樣將一般或具名資源指派給專案工作的專案經理或資源管理員所建立。</span><span class="sxs-lookup"><span data-stu-id="73ca4-113">Labor estimates are created by the Project Manager or Resource manager who also assigns a generic or named resource to the project task.</span></span> <span data-ttu-id="73ca4-114">您可以在 Dataverse 中 **專案詳細資料** 頁面的 **資源指派** 索引標籤上檢閱資源指派記錄。</span><span class="sxs-lookup"><span data-stu-id="73ca4-114">Resource assignment records can be reviewed on the **Resource Assignments** tab on the **Project Details** page in Dataverse.</span></span> <span data-ttu-id="73ca4-115">Dataverse 中的資源指派記錄會使用 **Project Operations 時數估計值整合實體 (msdyn\_resourceassignments)** 在 Finance and Operations 應用程式中建立四個預測記錄。</span><span class="sxs-lookup"><span data-stu-id="73ca4-115">Resource assignment records in Dataverse create hour forecast records in Finance and Operations apps using **Project Operations integration entity for hour estimates (msdyn\_resourceassignments)**.</span></span>

   ![人力估計值整合](./Media/DW4LaborEstimates.png)

<span data-ttu-id="73ca4-117">雙重寫入會將資源指派記錄同步處理至臨時表格 (**ProjCDSEstimateHoursImport**)，然後使用商務規則來建立和更新時數預測記錄 (**ProjForecastEmpl**)。</span><span class="sxs-lookup"><span data-stu-id="73ca4-117">Dual-write synchronizes resource assignment records to the staging table (**ProjCDSEstimateHoursImport**), and then uses business logic to create and update hour forecast records (**ProjForecastEmpl**).</span></span>

<span data-ttu-id="73ca4-118">專案會計師會移至 **專案管理與會計** > **所有專案** > **計劃** > **時數預測**，以審查 Finance and Operations應用程式中建立的預測時數記錄。</span><span class="sxs-lookup"><span data-stu-id="73ca4-118">The Project accountant reviews forecast hour records created in Finance and Operations apps by going to **Project management and accounting** > **All projects** > **Plan** > **Hour forecasts**.</span></span>

## <a name="expense-estimates"></a><span data-ttu-id="73ca4-119">費用估計值</span><span class="sxs-lookup"><span data-stu-id="73ca4-119">Expense estimates</span></span>

<span data-ttu-id="73ca4-120">費用估計值是由專案經理在 Dataverse 中 **專案詳細資料** 頁面的 **費用估計值** 索引標籤上所建立。</span><span class="sxs-lookup"><span data-stu-id="73ca4-120">Expense estimates are created by the Project manager on the **Expense Estimates** tab on the **Project Details** page in Dataverse.</span></span> <span data-ttu-id="73ca4-121">費用估計值記錄會儲存在 Dataverse 的 **估計明細** 實體中。</span><span class="sxs-lookup"><span data-stu-id="73ca4-121">Expense estimate records are stored in the **Estimate Line** entity in Dataverse.</span></span> <span data-ttu-id="73ca4-122">這些估計記錄具有交易分類 **費用**，並且使用 **Project Operations 費用估計值整合實體 (msdyn\_estimatelines)** 同步處理至 Finance and Operations 應用程式中的費用預測記錄。</span><span class="sxs-lookup"><span data-stu-id="73ca4-122">These estimate records have transaction class, **Expense** and are synchronized to expense forecast records in Finance and Operations apps using **Project Operations integration entity for expense estimates (msdyn\_estimatelines)**.</span></span>

   ![費用估計值整合](./Media/DW4ExpenseEstimates.png)

<span data-ttu-id="73ca4-124">雙重寫入會將費用估計記錄同步處理至臨時表格 (**ProjCDSEstimateExpenseImport**)，然後使用商務規則來建立和更新費用預測記錄 (**ProjForecastCost**)。</span><span class="sxs-lookup"><span data-stu-id="73ca4-124">Dual-write synchronizes expense estimate records to the staging table, **ProjCDSEstimateExpenseImport)** and then uses business logic to create and update expense forecast records (**ProjForecastCost**).</span></span> <span data-ttu-id="73ca4-125">估計明細會分別儲存銷售估計和成本估計記錄。</span><span class="sxs-lookup"><span data-stu-id="73ca4-125">Estimate lines store sales estimate and cost estimate records separately.</span></span> <span data-ttu-id="73ca4-126">Finance and Operations 應用程式中的商務規則會在臨時表格中使用此詳細資源，填入單一費用預測記錄。</span><span class="sxs-lookup"><span data-stu-id="73ca4-126">The business logic in Finance and Operations apps populates a single Expense forecast record using this detail in the staging table.</span></span>

<span data-ttu-id="73ca4-127">專案會計師可移至 **專案管理與會計** > **所有專案** > **計劃** > **費用預測**，以審查 Finance and Operations 應用程式中的費用預測記錄。</span><span class="sxs-lookup"><span data-stu-id="73ca4-127">The Project accountant can review expense forecast records in Finance and Operations apps by going to **Project management and accounting** > **All projects** > **Plan** > **Expense forecasts**.</span></span>

## <a name="material-estimates"></a><span data-ttu-id="73ca4-128">材料估計值</span><span class="sxs-lookup"><span data-stu-id="73ca4-128">Material estimates</span></span>

<span data-ttu-id="73ca4-129">費用估計值是由專案經理在 Dataverse 中 **專案詳細資料** 頁面的 **材料估計值** 索引標籤上所建立。</span><span class="sxs-lookup"><span data-stu-id="73ca4-129">Material estimates are created by the Project manager on the **Material Estimates** tab on the **Project Details** page in Dataverse.</span></span> <span data-ttu-id="73ca4-130">材料估計值記錄會儲存在 Dataverse 的 **估計明細** 實體中。</span><span class="sxs-lookup"><span data-stu-id="73ca4-130">Material estimate records are stored in the **Estimate Line** entity in Dataverse.</span></span> <span data-ttu-id="73ca4-131">這些估計記錄具有交易分類 **材料**，並且使用 **Project Operations 材料估計值整合資料表 (msdyn\_estimatelines)** 同步處理至 Finance and Operations 應用程式中的項目預測記錄。</span><span class="sxs-lookup"><span data-stu-id="73ca4-131">These estimate records have the transaction class, **Material** and are synchronized to item forecast records in Finance and Operations apps using **Project integration table for material estimates (msdyn\_estimatelines)**.</span></span>

   ![材料估計值整合](./Media/DW4MaterialEstimates.png)

<span data-ttu-id="73ca4-133">雙重寫入會將材料估計記錄同步處理至臨時表格 **ProjForecastSalesImpor**，然後使用商務規則來建立和更新項目預測記錄 (**ForecastSales**)。</span><span class="sxs-lookup"><span data-stu-id="73ca4-133">Dual-write synchronizes material estimate records to the staging table **ProjForecastSalesImpor**, and then uses business logic to create and update item forecast records (**ForecastSales**).</span></span> <span data-ttu-id="73ca4-134">估計明細會分別儲存銷售估計和成本估計記錄。</span><span class="sxs-lookup"><span data-stu-id="73ca4-134">Estimate lines store sales estimate and cost estimate records separately.</span></span> <span data-ttu-id="73ca4-135">Finance and Operations 應用程式中的商務規則會在臨時表格中使用此詳細資源，填入單一項目預測記錄。</span><span class="sxs-lookup"><span data-stu-id="73ca4-135">The business logic in Finance and Operations apps populates a single Item forecast record using this detail in the staging table.</span></span>

<span data-ttu-id="73ca4-136">專案會計師可移至 **專案管理與會計** > **所有專案** > **計劃** > **項目預測**，以審查 Finance and Operations 應用程式中的項目預測記錄。</span><span class="sxs-lookup"><span data-stu-id="73ca4-136">The Project accountant can review item forecast records in Finance and Operations apps by going to **Project management and accounting** > **All projects** > **Plan** > **Item forecasts**.</span></span>

## <a name="project-actuals"></a><span data-ttu-id="73ca4-137">專案實際值</span><span class="sxs-lookup"><span data-stu-id="73ca4-137">Project actuals</span></span>

<span data-ttu-id="73ca4-138">專案實際值是在 Dataverse 中根據時間、費用、材料和帳務活動所建立。</span><span class="sxs-lookup"><span data-stu-id="73ca4-138">Project actuals are created in Dataverse, based on time, expense, material, and billing activity.</span></span> <span data-ttu-id="73ca4-139">這些交易的所有營運屬性 (包括數量、成本價、銷售價和專案) 都是在此 Dataverse 實體中擷取。</span><span class="sxs-lookup"><span data-stu-id="73ca4-139">All operational attributes of these transactions including quantity, cost price, sales price, and project are captured in this Dataverse entity.</span></span> <span data-ttu-id="73ca4-140">如需詳細資訊，請參[實際值](../actuals/actuals-overview.md)。</span><span class="sxs-lookup"><span data-stu-id="73ca4-140">For more information, see [Actuals](../actuals/actuals-overview.md).</span></span> <span data-ttu-id="73ca4-141">實際記錄是使用雙重寫入資料表對應 **Project Operations 整合實際值 (msdyn\_actuals)** 同步處理至 Finance and Operations 應用程式，以用於下游會計。</span><span class="sxs-lookup"><span data-stu-id="73ca4-141">Actual records are synchronized to Finance and Operations apps using the dual-write table map **Project Operations integration actuals (msdyn\_actuals)** for downstream accounting.</span></span>

   ![實際值整合](./Media/DW4Actuals.png)

<span data-ttu-id="73ca4-143">**Project Operations 整合實際值** 資料表對應會在 **略過同步處理 (僅供內部使用)** 屬性設定為 **False** 的情況下，同步處理 Dataverse 中 **實際值** 實體的所有資料。</span><span class="sxs-lookup"><span data-stu-id="73ca4-143">The **Project Operations integration actuals** table map synchronizes all the records from the **Actuals** entity in Dataverse, with the attribute **Skip Sync (internal use only)** set to **False**.</span></span> <span data-ttu-id="73ca4-144">建立記錄時，Dataverse 會自動設定此屬性值。</span><span class="sxs-lookup"><span data-stu-id="73ca4-144">This attribute value is set in Dataverse automatically when the record is created.</span></span> <span data-ttu-id="73ca4-145">此屬性設定為 **True** 的範例如下：</span><span class="sxs-lookup"><span data-stu-id="73ca4-145">Examples where this attribute is set to **True** are:</span></span>

  - <span data-ttu-id="73ca4-146">公司間交易的專案成本實際值。</span><span class="sxs-lookup"><span data-stu-id="73ca4-146">Project cost actuals for intercompany transactions.</span></span> <span data-ttu-id="73ca4-147">如需詳細資訊，請參閱[建立公司間交易](../project-accounting/create-intercompany-transactions.md)。</span><span class="sxs-lookup"><span data-stu-id="73ca4-147">For more information, see [Create intercompany transactions](../project-accounting/create-intercompany-transactions.md).</span></span> <span data-ttu-id="73ca4-148">跳過這些記錄是因為，系統會在進行公司間廠商發票過帳時重新建立 Finance and Operations 應用程式中的實際專案成本。</span><span class="sxs-lookup"><span data-stu-id="73ca4-148">These records are skipped because the system recreates the project cost actual in Finance and Operations apps when the intercompany vendor invoice is posted.</span></span>
  - <span data-ttu-id="73ca4-149">確認預估發票時建立負數的未開單銷售記錄。</span><span class="sxs-lookup"><span data-stu-id="73ca4-149">Negative unbilled sales records created when the proforma invoice is confirmed.</span></span> <span data-ttu-id="73ca4-150">跳過這些記錄是因為，Finance and Operations 應用程式中的專案子分類帳未在開立發票時沖回未開單銷售記錄，而是將狀態變更為已開立全額發票。</span><span class="sxs-lookup"><span data-stu-id="73ca4-150">These records are skipped because the project subledger in Finance and Operations apps doesn't reverse the unbilled sales record at invoicing but changes the status to fully invoiced.</span></span>

<span data-ttu-id="73ca4-151">雙重寫入資料表對應會將實際值記錄同步處理至臨時表格 **ProjCDSActualsImport**。</span><span class="sxs-lookup"><span data-stu-id="73ca4-151">The dual-write table map synchronizes the actuals records to the staging table, **ProjCDSActualsImport**.</span></span> <span data-ttu-id="73ca4-152">這些記錄會在建立 Project Operations 整合帳目明細和專案發票提案明細時，由定期程序 **從臨時表格匯入** 進行處理。</span><span class="sxs-lookup"><span data-stu-id="73ca4-152">These records are processed by the periodic process **Import from staging table** when creating Project Operations integration journal lines and project invoice proposal lines.</span></span> <span data-ttu-id="73ca4-153">如需詳細資訊，請參閱 [Project Operations 中的整合帳目](../project-accounting/project-operations-integration-journal.md)。</span><span class="sxs-lookup"><span data-stu-id="73ca4-153">For more information, see [Integration journal in Project Operations](../project-accounting/project-operations-integration-journal.md).</span></span>

<span data-ttu-id="73ca4-154">Dataverse 還會擷取 **交易關係** 實體中專案實際交易之間的連結。</span><span class="sxs-lookup"><span data-stu-id="73ca4-154">Dataverse also captures the links between the project actual transactions in the **Transaction connection** entity.</span></span> <span data-ttu-id="73ca4-155">如需詳細資訊，請參閱[將實際值連結至原始記錄](../actuals/linkingactuals.md)。</span><span class="sxs-lookup"><span data-stu-id="73ca4-155">For more information, see [Link actuals to original records](../actuals/linkingactuals.md).</span></span> <span data-ttu-id="73ca4-156">實際交易之間的連結也是使用雙重寫入資料表對應 **專案交易關聯整合實體 (msdyn\_transactionconnections)** 同步處理至 Finance and Operations 應用程式。</span><span class="sxs-lookup"><span data-stu-id="73ca4-156">Links between actual transactions are also synchronized to Finance and Operations apps using the dual-write table map, **Integration entity for project transaction relationships (msdyn\_transactionconnections)**.</span></span> <span data-ttu-id="73ca4-157">建立 Project Operations 整合帳目明細和專案發票提案明細時，定期程序 **從臨時表格匯入** 會使用這些記錄。</span><span class="sxs-lookup"><span data-stu-id="73ca4-157">These records are used by the periodic process, **Import from staging table** when creating Project Operations integration journal lines and Project invoice proposal lines.</span></span>

<span data-ttu-id="73ca4-158">過帳 Project Operations 整合帳目和專案發票提案會觸發各自在臨時表格 **ProjCDSActualsImport** 中的記錄。</span><span class="sxs-lookup"><span data-stu-id="73ca4-158">Posting a Project Operations integration journal and a project invoice proposal triggers an update in respective records in the staging table, **ProjCDSActualsImport**.</span></span> <span data-ttu-id="73ca4-159">系統會擷取並記錄實際值交易的下列會計屬性：</span><span class="sxs-lookup"><span data-stu-id="73ca4-159">The system captures and records the following accounting attributes for actuals transactions:</span></span>

- <span data-ttu-id="73ca4-160">會計貨幣金額</span><span class="sxs-lookup"><span data-stu-id="73ca4-160">Accounting currency amount</span></span>
- <span data-ttu-id="73ca4-161">匯率</span><span class="sxs-lookup"><span data-stu-id="73ca4-161">Exchange rate</span></span>
- <span data-ttu-id="73ca4-162">憑單號碼</span><span class="sxs-lookup"><span data-stu-id="73ca4-162">Voucher number</span></span>
- <span data-ttu-id="73ca4-163">銷售稅金額</span><span class="sxs-lookup"><span data-stu-id="73ca4-163">Sales tax amount</span></span>

<span data-ttu-id="73ca4-164">**Project Operations 整合實際值** 資料表對應會使用此資訊更新各自在 Dataverse 中的實際值記錄。</span><span class="sxs-lookup"><span data-stu-id="73ca4-164">The **Project Operations integration actuals** table map updates respective actuals records in Dataverse with this information.</span></span>
